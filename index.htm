<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Космический цыплёнок — мульт</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style>
    html, body {margin:0;padding:0;width:100vw;height:100vh;background:#141932;overflow-x:hidden;}
    body {
      min-height:100vh; min-width:100vw;
      display:flex;align-items:center;justify-content:center;
      font-family: 'Montserrat', 'Arial', sans-serif;
    }
    main {width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;}
    .svg-wrapper {position:relative;width:100vw;max-width:480px;min-width:260px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
    .star-bg {position:absolute;left:0;top:0;width:100vw;min-width:350px;height:45vw;max-height:260px;z-index:0;object-fit:cover;}
    .constellations {position:absolute;top:2vw;left:0;right:0;margin:auto;pointer-events:none;z-index:1;width:96vw;max-width:350px;}
    #egg {display:block;position:relative;z-index:2;width:76vw;max-width:310px;height:auto;margin:auto;}
    .choose-panel {margin:2vh 0 0 0;display:flex;flex-direction:column;align-items:center;}
    .choose-title {color:#fffad4;font-size:clamp(1.08em,3.4vw,1.5em);margin-bottom:2vh;text-shadow:0 2px 8px #241c36;}
    .choices {display:flex;gap:5vw;justify-content:center;flex-wrap:wrap;}
    .chick-choice {
      display:flex;flex-direction:column;align-items:center;
      background:#f8fdffb6;border:3px solid #d6e4fc;border-radius:16px;
      box-shadow:0 2px 16px #5fd7fa26;padding:13px 12px 10px 12px;cursor:pointer;min-width:110px;margin:1vh 0;
      transition:.22s;border-color: #d6e4fc;font-size:1.05em;user-select:none;
    }
    .chick-choice.selected, .chick-choice:active, .chick-choice:hover {
      border-color: #62e9fa; background: #e2feffc6; box-shadow: 0 4px 18px #a6feff4a;
    }
    .chick-svg {width:78px;height:95px;margin-bottom:7px;display:block;}
    #info, #egg-anim, #crack-anim, #hero, #again {display:none;}
    #info {color:#ecebfc;text-align:center;font-size:clamp(1.08em,2.5vw,1.2em);margin-bottom:1.3vh;}
    #again {margin-top:2.2vh;}
    .svg-btn {
      margin:18px 0 0 0;padding:0.7em 2em;border:none;
      background:#7dfcff;color:#30597a;border-radius:14px;
      font-size:clamp(1em,2.2vw,1.17em);box-shadow:0 2px 8px #c4fcfb5a;
      cursor:pointer;transition:background 0.17s;
    }
    .svg-btn:active,.svg-btn:focus{background:#b6feff;}
    @media (max-width:600px) {
      .svg-wrapper{min-width:92vw;max-width:99vw;}
      #egg{width:99vw;max-width:99vw;}
      .chick-svg{width:33vw;max-width:120px;}
      .choices{gap:8vw;}
      .chick-choice{min-width:46vw;padding:12px 3vw 10px 3vw;font-size:1.01em;}
    }
    @media (max-width:400px) {
      .chick-choice{min-width:70vw;font-size:.97em;}
      .chick-svg{width:37vw;}
    }
  </style>
</head>
<body>
<main>
  <div class="svg-wrapper">
    <!-- Фон: простое "звёздное" небо, потом svg-созвездия -->
    <img src="https://i.imgur.com/4Qy8pTa.jpg" class="star-bg" alt="star bg">
    <svg class="constellations" viewBox="0 0 300 160">
      <!-- Большая Курачка -->
      <g>
        <circle cx="90" cy="40" r="6" fill="#ffe672" stroke="#fffcd6" stroke-width="2"/>
        <circle cx="130" cy="27" r="4.5" fill="#fff8c1"/>
        <circle cx="170" cy="38" r="5" fill="#f6efd7"/>
        <circle cx="210" cy="55" r="5.5" fill="#fff9c1"/>
        <polyline points="90,40 130,27 170,38 210,55" fill="none" stroke="#ffe672" stroke-width="2" stroke-dasharray="4,2"/>
        <!-- Точка старта яйца -->
        <circle id="eggStart" cx="210" cy="55" r="10" fill="none" stroke="#fffbaf" stroke-width="2" opacity="0.6"/>
      </g>
      <!-- Маленькая Курачка -->
      <g>
        <circle cx="250" cy="130" r="5" fill="#b3e8ff"/>
        <circle cx="220" cy="110" r="3.5" fill="#d1f1ff"/>
        <circle cx="180" cy="100" r="4" fill="#d1f1ff"/>
        <polyline points="250,130 220,110 180,100" fill="none" stroke="#c0e2ff" stroke-width="2" stroke-dasharray="4,2"/>
      </g>
    </svg>
    <!-- Выбор героя -->
    <div id="choosePanel" class="choose-panel">
      <div class="choose-title">Кто внутри яйца?</div>
      <div class="choices">
        <div class="chick-choice" data-chick="alien" tabindex="0">
          <svg viewBox="0 0 140 180" class="chick-svg">
            <ellipse cx="70" cy="92" rx="52" ry="56" fill="#a2e1fe" stroke="#59b0e8" stroke-width="6"/>
            <ellipse cx="70" cy="138" rx="38" ry="32" fill="#63f0fa" stroke="#2ea9b8" stroke-width="4"/>
            <ellipse cx="45" cy="92" rx="12" ry="16" fill="#fff"/>
            <ellipse cx="95" cy="92" rx="12" ry="16" fill="#fff"/>
            <ellipse cx="45" cy="98" rx="5" ry="8" fill="#5a64c9"/>
            <ellipse cx="95" cy="98" rx="5" ry="8" fill="#5a64c9"/>
            <ellipse cx="70" cy="108" rx="10" ry="5" fill="#7ad1fd"/>
            <polygon points="70,116 64,124 76,124" fill="#fffacc"/>
            <ellipse cx="35" cy="60" rx="7" ry="13" fill="#cdf7fd" transform="rotate(-20 35 60)"/>
            <ellipse cx="105" cy="60" rx="7" ry="13" fill="#cdf7fd" transform="rotate(20 105 60)"/>
            <circle cx="70" cy="60" r="4" fill="#fffad8"/>
            <circle cx="50" cy="47" r="3" fill="#e1fffd"/>
            <circle cx="90" cy="47" r="3" fill="#e1fffd"/>
          </svg>
          <div>Инопланетянин</div>
        </div>
        <div class="chick-choice" data-chick="zombie" tabindex="0">
          <svg viewBox="0 0 140 180" class="chick-svg">
            <ellipse cx="70" cy="92" rx="52" ry="56" fill="#b1ffb3" stroke="#3a8540" stroke-width="6"/>
            <ellipse cx="70" cy="138" rx="38" ry="32" fill="#84e884" stroke="#397442" stroke-width="4"/>
            <ellipse cx="50" cy="95" rx="12" ry="15" fill="#fff"/>
            <ellipse cx="95" cy="93" rx="8" ry="12" fill="#34451c"/>
            <ellipse cx="52" cy="99" rx="5" ry="8" fill="#38bb68"/>
            <rect x="86" y="93" width="8" height="9" rx="3" fill="#fff"/>
            <rect x="60" y="120" width="19" height="4" rx="2" fill="#2a4f2a"/>
            <rect x="61" y="121" width="2" height="2" rx="1" fill="#fff"/>
            <rect x="68" y="121" width="2" height="2" rx="1" fill="#fff"/>
            <rect x="75" y="121" width="2" height="2" rx="1" fill="#fff"/>
            <rect x="79" y="121" width="2" height="2" rx="1" fill="#fff"/>
            <rect x="40" y="77" width="18" height="5" rx="2" fill="#dadada"/>
            <rect x="43" y="79" width="6" height="2.2" rx="1.1" fill="#a5a5a5"/>
            <rect x="49" y="78" width="6" height="2.2" rx="1.1" fill="#a5a5a5"/>
            <rect x="95" y="120" width="14" height="3" rx="1.2" fill="#5aad62" transform="rotate(-14 102 122)"/>
          </svg>
          <div>Зомби</div>
        </div>
      </div>
    </div>
    <div id="info"></div>
    <svg id="egg" viewBox="0 0 200 240" style="display:none;position:relative;z-index:2;">
      <defs>
        <radialGradient id="egg-cosmo" cx="50%" cy="32%" r="73%">
          <stop offset="0%" stop-color="#eaffff" />
          <stop offset="80%" stop-color="#c3e7ff" />
          <stop offset="100%" stop-color="#586fff" />
        </radialGradient>
      </defs>
      <ellipse id="eggMain" cx="100" cy="130" rx="70" ry="92" fill="url(#egg-cosmo)" stroke="#70e8ff" stroke-width="8"/>
      <ellipse id="eggGlow" cx="100" cy="140" rx="90" ry="100" fill="#fff" opacity="0.13" />
      <!-- трещины рисуем позже -->
      <polyline id="crack1" points="120,90 114,120 105,135" fill="none" stroke="#69caff" stroke-width="4" opacity="0"/>
      <polyline id="crack2" points="135,122 119,152 101,157" fill="none" stroke="#69caff" stroke-width="3" opacity="0"/>
      <polyline id="crack3" points="82,104 88,127 105,145" fill="none" stroke="#69caff" stroke-width="3" opacity="0"/>
      <!-- Магическое сияние -->
      <ellipse id="eggLight" cx="100" cy="135" rx="80" ry="40" fill="#eafffd" opacity="0"/>
    </svg>
    <div id="hero"></div>
    <button id="again" class="svg-btn" onclick="window.location.reload()">Смотреть снова</button>
  </div>
</main>
<script>
let chosen = null;
const panel = document.getElementById('choosePanel');
const info = document.getElementById('info');
const eggSVG = document.getElementById('egg');
const cracks = [document.getElementById('crack1'), document.getElementById('crack2'), document.getElementById('crack3')];
const light = document.getElementById('eggLight');
const heroDiv = document.getElementById('hero');
const againBtn = document.getElementById('again');

document.querySelectorAll('.chick-choice').forEach(btn=>{
  btn.onclick = ()=>{
    chosen = btn.dataset.chick;
    document.querySelectorAll('.chick-choice').forEach(b=>b.classList.remove('selected'));
    btn.classList.add('selected');
    setTimeout(()=>{
      panel.style.display="none";
      info.textContent = "Космическое яйцо появляется в небе...";
      info.style.display = "block";
      animateEggDrop();
    }, 380);
  }
});

function animateEggDrop() {
  eggSVG.style.display = "block";
  eggSVG.style.opacity = 1;
  // Начальная позиция - из созвездия (приблизительно)
  eggSVG.style.position = "absolute";
  eggSVG.style.left = "calc(210px - 100px)";
  eggSVG.style.top = "40px";
  eggSVG.style.transition = "none";
  // падение (4 сек, ускорение)
  setTimeout(()=>{
    eggSVG.style.transition = "top 4s cubic-bezier(.31,.71,.88,1.14)";
    eggSVG.style.top = "230px";
    setTimeout(()=>{
      info.textContent = "Яйцо приземлилось... Что же будет дальше?";
      animateCracks();
    }, 4100);
  }, 100);
}

function animateCracks() {
  // Светится изнутри
  light.setAttribute('opacity', '0.25');
  setTimeout(()=>{cracks[0].setAttribute('opacity', '1');}, 600);
  setTimeout(()=>{cracks[1].setAttribute('opacity', '1');}, 1200);
  setTimeout(()=>{cracks[2].setAttribute('opacity', '1');}, 1800);
  setTimeout(()=>{
    light.setAttribute('opacity', '0.5');
    info.textContent = "Яйцо трещит всё сильнее...";
    setTimeout(()=>{
      light.setAttribute('opacity', '0');
      showHero();
    }, 900);
  }, 2300);
}

function showHero() {
  eggSVG.style.opacity=0;
  info.textContent = "";
  heroDiv.innerHTML = (chosen==="alien" ? `
      <svg viewBox="0 0 140 180" class="chick-svg" style="margin:0 auto;">
        <ellipse cx="70" cy="92" rx="52" ry="56" fill="#a2e1fe" stroke="#59b0e8" stroke-width="6"/>
        <ellipse cx="70" cy="138" rx="38" ry="32" fill="#63f0fa" stroke="#2ea9b8" stroke-width="4"/>
        <ellipse cx="45" cy="92" rx="12" ry="16" fill="#fff"/>
        <ellipse cx="95" cy="92" rx="12" ry="16" fill="#fff"/>
        <ellipse cx="45" cy="98" rx="5" ry="8" fill="#5a64c9"/>
        <ellipse cx="95" cy="98" rx="5" ry="8" fill="#5a64c9"/>
        <ellipse cx="70" cy="108" rx="10" ry="5" fill="#7ad1fd"/>
        <polygon points="70,116 64,124 76,124" fill="#fffacc"/>
        <ellipse cx="35" cy="60" rx="7" ry="13" fill="#cdf7fd" transform="rotate(-20 35 60)"/>
        <ellipse cx="105" cy="60" rx="7" ry="13" fill="#cdf7fd" transform="rotate(20 105 60)"/>
        <circle cx="70" cy="60" r="4" fill="#fffad8"/>
        <circle cx="50" cy="47" r="3" fill="#e1fffd"/>
        <circle cx="90" cy="47" r="3" fill="#e1fffd"/>
      </svg>
      <div style="margin:1vh 0 0 0;font-size:1.18em;color:#43c6e4;">Твой инопланетный цыплёнок!</div>
    ` : `
      <svg viewBox="0 0 140 180" class="chick-svg" style="margin:0 auto;">
        <ellipse cx="70" cy="92" rx="52" ry="56" fill="#b1ffb3" stroke="#3a8540" stroke-width="6"/>
